<!DOCTYPE html>
<html lang="sk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dopl≈àovanie pojmov do ucelen√©ho textu (2 a≈æ 4 mo≈ænosti) - gener√°tor</title>
    <style>
        :root {
            --primary-color: #0056b3;
            --bg-color: #f4f6f9;
            --container-bg: #ffffff;
            --border-color: #ced4da;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-color);
            color: #333;
            margin: 0;
            padding: 20px;
            line-height: 1.5;
        }
        .generator-container {
            max-width: 1000px;
            margin: 0 auto;
            background-color: var(--container-bg);
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        h1 {
            color: var(--primary-color);
            text-align: center;
            border-bottom: 2px solid #e9ecef;
            padding-bottom: 15px;
            margin-bottom: 25px;
        }
        .form-group {
            margin-bottom: 20px;
        }
        label {
            display: block;
            font-weight: bold;
            margin-bottom: 8px;
            color: #495057;
        }
        input[type="text"], input[type="number"] {
            width: 100%;
            padding: 10px;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            box-sizing: border-box;
            font-size: 1rem;
        }
        textarea {
            width: 100%;
            height: 300px;
            padding: 12px;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            font-family: 'Courier New', Courier, monospace;
            font-size: 0.95rem;
            resize: vertical;
            box-sizing: border-box;
            white-space: pre;
            overflow-wrap: normal;
            overflow-x: scroll;
        }
        .help-text {
            font-size: 0.9rem;
            color: #6c757d;
            background-color: #e9ecef;
            padding: 10px;
            border-radius: 4px;
            margin-bottom: 10px;
        }
        .help-text code {
            background-color: #d1ecf1;
            padding: 2px 4px;
            border-radius: 3px;
            color: #0c5460;
        }
        .button-group {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 20px;
            justify-content: center;
        }
        button {
            padding: 12px 24px;
            font-size: 1rem;
            font-weight: bold;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.2s, transform 0.1s;
        }
        button:active {
            transform: scale(0.98);
        }
        .btn-primary {
            background-color: #28a745;
            color: white;
            flex: 2;
        }
        .btn-primary:hover { background-color: #218838; }
        
        .btn-outline {
            background-color: transparent;
            border: 2px solid #6c757d;
            color: #6c757d;
        }
        .btn-outline:hover { background-color: #6c757d; color: white; }

        .btn-tool {
            background-color: #17a2b8;
            color: white;
            padding: 5px 10px;
            font-size: 0.9rem;
            margin-top: 5px;
        }
        .btn-tool:hover { background-color: #138496; }

        #fileInput { display: none; }
        
        .row { display: flex; gap: 20px; }
        .col { flex: 1; }
    </style>
</head>
<body>

<div class="generator-container">
    <h1 style="text-align: center;">Dopl≈àovanie pojmov do ucelen√©ho textu po riadkoch<br>(2 a≈æ 4 mo≈ænosti) - gener√°tor IA cviƒçenia</h1>

    <div class="row">
        <div class="col">
            <div class="form-group">
                <label for="exTitle">N√°zov cviƒçenia:</label>
                <input type="text" id="exTitle" placeholder="Napr. 7. roƒçn√≠k - Nemƒçina - Sloves√°">
            </div>
        </div>
        <div class="col">
            <div class="form-group">
                <label for="exAuthor">Meno autora:</label>
                <input type="text" id="exAuthor" placeholder="Mgr. J√°n Nov√°k">
            </div>
        </div>
        <div class="col" style="flex: 0 0 100px;">
            <div class="form-group">
                <label for="exYear">Rok:</label>
                <input type="number" id="exYear" value="2026">
            </div>
        </div>
    </div>

    <div class="form-group">
        <label for="inputText">Obsah cviƒçenia:</label>
        <div class="help-text">
            <strong>Form√°t riadka:</strong> 1. ƒças≈• vety ... 2. ƒças≈• vety [TAB] Spr√°vna odpoveƒè | Nespr√°vna 1 | Nespr√°vna 2 ...<br>
            <strong>Form√°tovanie:</strong> Pre tuƒçn√© p√≠smo pou≈æite <code>&lt;b&gt;text&lt;/b&gt;</code>.<br>
            Pou≈æite <strong>TAB</strong> na oddelenie vety od mo≈ænost√≠. Prv√° mo≈ænos≈• za tabul√°torom je v≈ædy <strong>spr√°vna</strong>.
        </div>
        <textarea id="inputText" spellcheck="false" placeholder="<b>Hanna:</b> Hallo? ... bist du?[TAB]Wer|Wie|Wo
<b>Nico:</b> Ich ... Nico.[TAB]hei√üe|hause|komme"></textarea>
        <button type="button" class="btn-tool" onclick="insertSeparator()">Vlo≈æi≈• oddeƒæovaƒç "|"</button>
        <button type="button" class="btn-tool" onclick="insertBold()">Vlo≈æi≈• &lt;b&gt;</button>
    </div>

    <div class="button-group">
        <button class="btn-outline" onclick="saveToLocal()">Ulo≈æi≈• koncept</button>
        <button class="btn-outline" onclick="exportData()">Exportova≈• √∫daje</button>
        <button class="btn-outline" onclick="document.getElementById('fileInput').click()">Importova≈• √∫daje</button>
        <input type="file" id="fileInput" accept=".json" onchange="importData(this)">
        <button class="btn-primary" onclick="generateAndDownload()">Stiahnu≈• hotov√© cviƒçenie (.html)</button>
    </div>
	<br><br>
        <b>Spracovala pomocou UI</b>: Mgr. Erika Matyiov√° (2026)
	<br><br>
</div>

<script>
    // --- Inicializ√°cia ---
    window.addEventListener('DOMContentLoaded', () => {
        loadFromLocal();
    });

    // --- Spracovanie TAB v textarei ---
    document.getElementById('inputText').addEventListener('keydown', function(e) {
        if (e.key === 'Tab') {
            e.preventDefault();
            const start = this.selectionStart;
            const end = this.selectionEnd;
            this.value = this.value.substring(0, start) + "\t" + this.value.substring(end);
            this.selectionStart = this.selectionEnd = start + 1;
        }
    });

    // --- Pomocn√© tlaƒçidl√° ---
    function insertSeparator() {
        insertAtCursor("|");
    }

    function insertBold() {
        const textarea = document.getElementById('inputText');
        const start = textarea.selectionStart;
        const end = textarea.selectionEnd;
        const selectedText = textarea.value.substring(start, end);
        const replacement = "<b>" + selectedText + "</b>";
        textarea.value = textarea.value.substring(0, start) + replacement + textarea.value.substring(end);
        
        if (selectedText.length > 0) {
            textarea.selectionStart = start + 3;
            textarea.selectionEnd = end + 3;
        } else {
            textarea.selectionStart = start + 3;
            textarea.selectionEnd = start + 3;
        }
        textarea.focus();
    }

    function insertAtCursor(text) {
        const textarea = document.getElementById('inputText');
        const start = textarea.selectionStart;
        const end = textarea.selectionEnd;
        textarea.value = textarea.value.substring(0, start) + text + textarea.value.substring(end);
        textarea.selectionStart = textarea.selectionEnd = start + text.length;
        textarea.focus();
    }

    // --- LocalStorage Funkcie ---
    function saveToLocal() {
        const data = {
            title: document.getElementById('exTitle').value,
            author: document.getElementById('exAuthor').value,
            year: document.getElementById('exYear').value,
            content: document.getElementById('inputText').value
        };
        localStorage.setItem('dialGeneratorData', JSON.stringify(data));
        alert('Koncept bol ulo≈æen√Ω do prehliadaƒça.');
    }

    function loadFromLocal() {
        const stored = localStorage.getItem('dialGeneratorData');
        if (stored) {
            const data = JSON.parse(stored);
            document.getElementById('exTitle').value = data.title || '';
            document.getElementById('exAuthor').value = data.author || '';
            document.getElementById('exYear').value = data.year || '';
            document.getElementById('inputText').value = data.content || '';
        }
    }

    // --- Export / Import ---
    function exportData() {
        const data = {
            title: document.getElementById('exTitle').value,
            author: document.getElementById('exAuthor').value,
            year: document.getElementById('exYear').value,
            content: document.getElementById('inputText').value
        };
        const blob = new Blob([JSON.stringify(data, null, 2)], {type: 'application/json'});
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = 'cvicenie_data.json';
        a.click();
        URL.revokeObjectURL(url);
    }

    function importData(input) {
        const file = input.files[0];
        if (!file) return;
        const reader = new FileReader();
        reader.onload = function(e) {
            try {
                const data = JSON.parse(e.target.result);
                document.getElementById('exTitle').value = data.title || '';
                document.getElementById('exAuthor').value = data.author || '';
                document.getElementById('exYear').value = data.year || '';
                document.getElementById('inputText').value = data.content || '';
                alert('√ödaje √∫spe≈°ne naƒç√≠tan√©.');
            } catch (err) {
                alert('Chyba pri ƒç√≠tan√≠ s√∫boru. Skontrolujte form√°t.');
            }
        };
        reader.readAsText(file);
        input.value = ''; 
    }

    // --- GENER√ÅTOR ---
    function generateAndDownload() {
        const title = document.getElementById('exTitle').value.trim() || "Cviƒçenie";
        const author = document.getElementById('exAuthor').value.trim() || "Nezn√°my autor";
        const year = document.getElementById('exYear').value.trim() || new Date().getFullYear();
        const rawContent = document.getElementById('inputText').value;

        const lines = rawContent.split('\n');
        const exerciseData = [];

        lines.forEach(line => {
            if (!line.trim()) return;
            const parts = line.split('\t');
            if (parts.length < 2) return;

            const sentencePart = parts[0];
            const optionsPart = parts[1];
            const splitSentence = sentencePart.split('...');
            const part1 = splitSentence[0] ? splitSentence[0].trim() : '';
            const part2 = splitSentence[1] ? splitSentence[1].trim() : '';

            const options = optionsPart.split('|').map(o => o.trim()).filter(o => o !== '');
            if (options.length === 0) return;
            
            const correct = options[0];

            exerciseData.push({
                part1: part1,
                part2: part2,
                correct: correct,
                options: options
            });
        });

        if (exerciseData.length === 0) {
            alert('Neboli n√°jden√© ≈æiadne platn√© riadky.');
            return;
        }

        const finalHtml = getTemplate(title, author, year, JSON.stringify(exerciseData));

        // --- √öprava n√°zvu s√∫boru (bez diakritiky, medzery na podƒçiarkovn√≠ky) ---
        let filename = title.normalize("NFD").replace(/[\u0300-\u036f]/g, ""); 
        filename = filename.toLowerCase(); 
        filename = filename.replace(/\s+/g, '_'); 
        filename = filename.replace(/[^a-z0-9_]/g, ''); 

        const blob = new Blob([finalHtml], {type: 'text/html'});
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = filename + '.html';
        a.click();
        URL.revokeObjectURL(url);
    }

    // --- HTML ≈†ABL√ìNA ---
    function getTemplate(title, author, year, jsonData) {
        return `<!DOCTYPE html>
<html lang="sk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>${title}</title>
    <style>
        body {
            font-family: Courier bold, monospace;
            line-height: 1.6;
            background-color: #f8f9fa;
            color: #212529;
            margin: 0;
            padding: 20px;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background-color: #ffffff;
            padding: 25px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
        }
        h1 {
            color: #0056b3;
            border-bottom: 2px solid #e9ecef;
            padding-bottom: 10px;
            text-align: center;
        }
        .student-name {
            margin-bottom: 25px;
            text-align: left;
        }
        .student-name label {
            font-weight: bold;
            margin-right: 10px;
            font-size: 1.1rem;
        }
        .student-name input {
            padding: 8px;
            border: 1px solid #ced4da;
            border-radius: 4px;
            font-size: 1rem;
            width: 300px;
        }
        .exercise-container {
            margin-top: 20px;
        }
        
        .sub-question {
            display: flex;
            flex-direction: row; 
            align-items: center;
            justify-content: space-between;
            margin-bottom: 15px;
            padding: 10px 15px;
            background-color: #fdfdfd;
            border-bottom: 1px solid #e0e0e0;
            border-radius: 4px;
        }
        .sub-question:hover {
            background-color: #f1f8ff;
        }

        .sentence {
            font-size: 1.2rem;
            line-height: 1.7;
            flex: 1; 
            padding-right: 20px;
        }

        .options {
            display: flex;
            flex-direction: row;
            flex-wrap: wrap;
            gap: 8px;
            justify-content: flex-end;
            min-width: 30%;
        }

        .placeholder {
            font-weight: bold;
            color: #007bff;
            padding: 2px 5px;
            border-bottom: 2px dotted #007bff;
            min-width: 60px;
            display: inline-block;
            text-align: center;
            transition: all 0.3s ease;
            cursor: default;
        }
        
        .placeholder.filled {
            color: #000000;
            border-bottom: 2px solid #000000;
        }
        
        .placeholder.evaluated-correct {
            background-color: #d4edda;
            color: #155724;
            border-bottom: 2px solid #c3e6cb;
            padding: 3px 6px;
            border-radius: 4px;
        }
        .placeholder.evaluated-incorrect {
            background-color: #f8d7da;
            color: #721c24;
            border-bottom: 2px solid #f5c6cb;
            padding: 3px 6px;
            border-radius: 4px;
        }
        
        .option-btn {
            font-size: 1rem;
            font-weight: bold;
            padding: 8px 12px;
            background-color: #f0f0f0;
            border: 1px solid #ccc;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s ease;
            min-width: 50px;
            text-align: center;
        }
        .option-btn:hover {
            background-color: #e0e0e0;
            border-color: #bbb;
        }
        .option-btn.selected {
            background-color: #007bff;
            color: white;
            border-color: #0056b3;
            box-shadow: 0 0 4px rgba(0,123,255,0.5);
        }
        .option-btn:disabled {
            background-color: #e9ecef;
            color: #6c757d;
            cursor: not-allowed;
            opacity: 0.7;
            box-shadow: none;
        }
        
        .action-buttons {
            text-align: center;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 2px solid #e9ecef;
        }
        .action-buttons button {
            background-color: #28a745;
            color: white;
            padding: 12px 25px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1.2rem;
            font-weight: bold;
            margin: 0 10px;
            transition: background-color 0.3s ease;
        }
        .action-buttons button:hover {
            background-color: #218838;
        }
        .action-buttons button:disabled {
            background-color: #6c757d;
            cursor: not-allowed;
        }
        #detailedResultsBtn {
            background-color: #17a2b8;
            display: none;
        }
        #detailedResultsBtn:hover {
            background-color: #138496;
        }
        
        #resultsSummary {
            margin-top: 30px;
            padding: 20px;
            background-color: #e6f7ff;
            border: 1px solid #b3e0ff;
            border-radius: 8px;
            display: none;
        }
        #resultsSummary h2 {
            margin-top: 0;
            color: #0056b3;
            font-size: 1.5rem;
        }
        #resultsSummary p {
            font-size: 1.1rem;
            margin: 8px 0;
        }
        #resultsSummary strong {
            color: #333;
            display: inline-block;
            width: 180px;
        }

        .footer {
            margin-top: 40px;
            font-size: 0.9rem;
            color: #6c757d;
            text-align: right;
            border-top: 1px solid #dee2e6;
            padding-top: 10px;
        }

        @media print {
            body { padding: 0; margin: 0; }
            .container { box-shadow: none; border: none; width: 100%; max-width: 100%; }
            .no-print { display: none; }
            .option-btn { display: none; } 
            .placeholder { border: none; padding: 0; color: black; }
        }
    </style>
</head>
<body>

    <div class="container">
        <h1 id="exerciseTitle">${title}</h1>
        <h3 style="text-align:center; color:#555; margin-top:-10px;">Autor: ${author}, ${year}</h3>

        <div class="student-name">
            <label for="studentName">Meno ≈æiaka:</label>
            <input type="text" id="studentName" placeholder="Zadajte meno ≈æiaka">
        </div>

        <div id="exerciseContainer" class="exercise-container">
            </div>

        <div class="action-buttons no-print">
            <button id="evaluateBtn">Vyhodnoti≈•</button>
            <button id="detailedResultsBtn">Detailn√© v√Ωsledky</button>
        </div>

        <div id="resultsSummary">
            <h2>Prehƒæad hodnotenia</h2>
            <p><strong>N√°zov cviƒçenia:</strong> <span id="summaryTitle"></span></p>
            <p><strong>Meno ≈æiaka:</strong> <span id="summaryName"></span></p>
            <p><strong>Hodnotenie:</strong> <span id="summaryScore"></span></p>
            <p><strong>D√°tum a ƒças:</strong> <span id="summaryDateTime"></span></p>
        </div>

        <div class="footer">
            <b>Spracovala pomocou UI:</b> ${author} (${year})
        </div>
    </div>

    <script>
        const exerciseData = ${jsonData};
        const exerciseTitle = "${title}";
        let detailedResultsData = [];

        window.addEventListener('load', () => {
            const exerciseContainer = document.getElementById('exerciseContainer');

            exerciseData.forEach((task, index) => {
                const rowDiv = document.createElement('div');
                rowDiv.className = 'sub-question';
                rowDiv.dataset.correct = task.correct;
                rowDiv.dataset.part1 = task.part1;
                rowDiv.dataset.part2 = task.part2;
                
                const uniqueId = \`q\${index}\`;

                const sentenceDiv = document.createElement('div');
                sentenceDiv.className = 'sentence';
                
                const spanPart1 = document.createElement('span');
                // Podpora pre HTML tagy (napr. <b>)
                spanPart1.innerHTML = task.part1 + " ";
                
                const placeholder = document.createElement('span');
                placeholder.className = 'placeholder';
                placeholder.id = \`placeholder-\${uniqueId}\`;
                placeholder.textContent = '...';

                const spanPart2 = document.createElement('span');
                // Podpora pre HTML tagy (napr. <b>)
                spanPart2.innerHTML = " " + task.part2;

                sentenceDiv.appendChild(spanPart1);
                sentenceDiv.appendChild(placeholder);
                sentenceDiv.appendChild(spanPart2);

                const optionsDiv = document.createElement('div');
                optionsDiv.className = 'options';

                const optionsToShuffle = [...task.options];
                const shuffledOptions = shuffleArray(optionsToShuffle);

                shuffledOptions.forEach(opt => {
                    const btn = document.createElement('button');
                    btn.className = 'option-btn';
                    btn.textContent = opt;
                    btn.onclick = () => selectAnswer(btn, uniqueId, opt);
                    optionsDiv.appendChild(btn);
                });

                rowDiv.appendChild(sentenceDiv);
                rowDiv.appendChild(optionsDiv);
                exerciseContainer.appendChild(rowDiv);
            });
        });

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function selectAnswer(btn, uniqueId, value) {
            const parent = btn.parentElement;
            const buttons = parent.querySelectorAll('.option-btn');
            buttons.forEach(b => b.classList.remove('selected'));
            btn.classList.add('selected');

            const placeholder = document.getElementById(\`placeholder-\${uniqueId}\`);
            placeholder.textContent = value;
            placeholder.classList.add('filled');

            const rowDiv = parent.parentElement;
            rowDiv.dataset.selected = value;
        }

        const evaluateBtn = document.getElementById('evaluateBtn');
        evaluateBtn.addEventListener('click', () => {
            const studentName = document.getElementById('studentName').value.trim() || "Anonym";
            const questions = document.querySelectorAll('.sub-question');
            let correctCount = 0;
            const totalQuestions = questions.length;
            detailedResultsData = [];

            document.querySelectorAll('.option-btn').forEach(b => b.disabled = true);
            evaluateBtn.disabled = true;

            questions.forEach(q => {
                const selected = q.dataset.selected;
                const correct = q.dataset.correct;
                // Naƒç√≠tanie d√°t (part1, part2) je st√°le potrebn√© pre zobrazenie
                const part1 = q.dataset.part1;
                const part2 = q.dataset.part2;

                let status = "missing"; 
                if (selected) {
                    if (selected === correct) {
                        status = "correct";
                        correctCount++;
                    } else {
                        status = "incorrect";
                    }
                }

                const ph = q.querySelector('.placeholder');
                if (status === "correct") ph.classList.add('evaluated-correct');
                else if (status === "incorrect") ph.classList.add('evaluated-incorrect');

                const selectedBtn = Array.from(q.querySelectorAll('.option-btn')).find(b => b.textContent === selected);
                if (selectedBtn) selectedBtn.classList.remove('selected');

                detailedResultsData.push({
                    fullSentenceWithAnswer: \`\${part1} <strong>\${selected || '...'}</strong> \${part2}\`,
                    correct: correct,
                    selected: selected || null,
                    status: status
                });
            });

            const percentage = totalQuestions > 0 ? (correctCount / totalQuestions) * 100 : 0;
            const scoreText = \`\${correctCount} / \${totalQuestions} (\${percentage.toFixed(0)}%)\`;
            const now = new Date();
            const dateTimeText = now.toLocaleString('sk-SK');

            document.getElementById('summaryTitle').textContent = exerciseTitle;
            document.getElementById('summaryName').textContent = studentName;
            document.getElementById('summaryScore').textContent = scoreText;
            document.getElementById('summaryDateTime').textContent = dateTimeText;
            document.getElementById('resultsSummary').style.display = 'block';
            document.getElementById('detailedResultsBtn').style.display = 'inline-block';

            window.quizResults = {
                title: exerciseTitle,
                name: studentName,
                score: scoreText,
                dateTime: dateTimeText,
                details: detailedResultsData
            };
        });

        document.getElementById('detailedResultsBtn').addEventListener('click', () => {
            const data = window.quizResults;
            if (!data) return;

            const win = window.open('', '_blank');
            let rowsHtml = '';
            data.details.forEach(item => {
                let symbol = '';
                if (item.status === 'correct') {
                    symbol = '<span class="symbol correct">‚úî</span>';
                } else if (item.status === 'incorrect') {
                    symbol = '<span class="symbol incorrect">‚ùå</span>';
                } else {
                    symbol = '<span class="symbol missing">!</span>';
                }

                rowsHtml += \`
                    <tr>
                        <td>\${item.fullSentenceWithAnswer}</td>
                        <td><strong>\${item.correct}</strong></td>
                        <td style="text-align:center;">\${symbol}</td>
                    </tr>
                \`;
            });

            const htmlContent = \`
                <!DOCTYPE html>
                <html lang="sk">
                <head>
                    <meta charset="UTF-8">
                    <title>Detailn√© v√Ωsledky: \${data.title}</title>
                    <style>
                        body { font-family: 'Segoe UI', sans-serif; padding: 20px; line-height: 1.5; color: #333; }
                        h1 { color: #0056b3; border-bottom: 2px solid #ddd; padding-bottom: 10px; }
                        .meta { margin-bottom: 20px; background: #f9f9f9; padding: 15px; border-radius: 5px; }
                        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
                        th, td { border: 1px solid #ddd; padding: 12px; text-align: left; vertical-align: middle; }
                        th { background-color: #f2f2f2; font-weight: bold; }
                        .correct { color: #28a745; font-weight: bold; }
                        .incorrect { color: #dc3545; font-weight: bold; }
                        .symbol { font-size: 1.4rem; }
                        .symbol.missing { color: #ffc107; font-weight: bold; }
                        .legend { margin-top: 30px; font-size: 0.9rem; border: 1px solid #eee; padding: 10px; display: inline-block; }
                        .btn-print { padding: 10px 20px; background: #007bff; color: white; border: none; cursor: pointer; border-radius: 5px; font-size: 1rem; }
                        @media print { .no-print { display: none; } body { padding: 0; } }
                    </style>
                </head>
                <body>
                    <button class="btn-print no-print" onclick="window.print()">üñ®Ô∏è Vytlaƒçi≈• (Ctrl+P)</button>
                    <h1>Detailn√Ω prehƒæad v√Ωsledkov</h1>
                    <div class="meta">
                        <strong>N√°zov cviƒçenia:</strong> \${data.title}<br>
                        <strong>Meno ≈æiaka:</strong> \${data.name}<br>
                        <strong>Hodnotenie:</strong> \${data.score}<br>
                        <strong>D√°tum:</strong> \${data.dateTime}
                    </div>

                    <table>
                        <thead>
                            <tr>
                                <th style="width: 50%">Zadan√° √∫loha (s odpoveƒèou ≈æiaka)</th>
                                <th style="width: 30%">Spr√°vna odpoveƒè</th>
                                <th style="width: 20%; text-align:center;">Hodnotenie</th>
                            </tr>
                        </thead>
                        <tbody>
                            \${rowsHtml}
                        </tbody>
                    </table>

                    <div class="legend">
                        <strong>Vysvetlivky:</strong><br>
                        <span class="symbol correct">‚úî</span> = Spr√°vna odpoveƒè<br>
                        <span class="symbol incorrect">‚ùå</span> = Nespr√°vna odpoveƒè<br>
                        <span class="symbol missing">!</span> = Ch√Ωbaj√∫ca odpoveƒè
                    </div>
                </body>
                </html>
            \`;

            win.document.open();
            win.document.write(htmlContent);
            win.document.close();
        });

    <\/script>
</body>
</html>`;
    }
</script>

</body>
</html>
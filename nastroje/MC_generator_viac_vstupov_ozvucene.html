<!DOCTYPE html>
<html lang="sk">
<head>
  <meta charset="UTF-8">
  <title>GenerÃ¡tor kvÃ­zov s hlasovÃ½m vÃ½stupom</title>
  <style>
    body { font-family: Courier bold, monospace; margin: 20px; background: #f4f4f4; }
    h1 { color: #333; }
    .frage-block { background: #fff; padding: 15px; margin-bottom: 20px; border-radius: 8px; box-shadow: 0 0 5px rgba(0,0,0,0.1); }
    .frage-block label { font-weight: bold; display: block; margin-top: 10px; }
    .frage-block input { width: 100%; padding: 8px; margin-top: 5px; border: 1px solid #ccc; border-radius: 4px; }
    .frage-block input.frage { background-color: #fff9c4; }
    .frage-block input.richtig { background-color: #c8e6c9; }
    .frage-block input.falsch { background-color: #f8bbd0; }
    button { padding: 10px 15px; margin: 5px 5px 15px 0; border: none; border-radius: 5px; cursor: pointer; background-color: #0078D4; color: white; }
    button:hover { background-color: #005a9e; }

    .speak-btn { background-color: #2196F3; color: white; border: none; border-radius: 5px; padding: 8px 10px; cursor: pointer; }
    .speak-btn:hover { background-color: #1976D2; }
    textarea { width: 100%; height: 250px; font-family: monospace; padding: 10px; border-radius: 6px; border: 1px solid #ccc; background: #fff; }
    select { padding: 8px; margin-bottom: 15px; border-radius: 5px; border: 1px solid #ccc; }
  </style>
</head>
<body>
  <h1>ğŸ§  GenerÃ¡tor kvÃ­zov s hlasovÃ½m vÃ½stupom</h1>
  <label for="frageSprache">ğŸ”§ Jazyk otÃ¡zok:</label>
  <select id="frageSprache">
    <option value="de-DE">NemÄina</option>
    <option value="sk-SK">SlovenÄina</option>
    <option value="en-GB">BritskÃ¡ angliÄtina</option>
	<option value="en-US">AmerickÃ¡ angliÄtina</option>
  </select>

  <label for="antwortSprache">ğŸ”§ Jazyk odpovedÃ­:</label>
  <select id="antwortSprache">
    <option value="de-DE">NemÄina</option>
    <option value="sk-SK">SlovenÄina</option>
    <option value="en-GB">BritskÃ¡ angliÄtina</option>
	<option value="en-US">AmerickÃ¡ angliÄtina</option>
  </select>

  <div id="fragen-container"></div>
  <button onclick="addFrage()">â• PridaÅ¥ otÃ¡zku</button>
  <button onclick="generateQuiz()">ğŸ¯ GenerovaÅ¥ kvÃ­z</button>
  <button onclick="copyOutput()">ğŸ“‹ KopÃ­rovaÅ¥ obsah</button>
  <button onclick="saveAsHTML()">ğŸ’¾ UloÅ¾iÅ¥ ako HTML</button>
  <h2>ğŸ’¡ VygenerovanÃ½ HTML kÃ³d:</h2>
  <textarea id="output"></textarea>

  <script>
  const fragenContainer = document.getElementById("fragen-container");
  const outputField = document.getElementById("output");

  window.onload = () => {
    const savedData = localStorage.getItem("quizData");
    if (savedData) {
      const parsed = JSON.parse(savedData);
      parsed.forEach(data => {
        const block = document.createElement("div");
        block.className = "frage-block";
        block.innerHTML = `
          <label>Znenie otÃ¡zky:</label><input type="text" class="frage frage" value="${data.frage}">
          <label>SprÃ¡vna odpoveÄ:</label><input type="text" class="richtig richtig" value="${data.richtig}">
          <label>NesprÃ¡vna odpoveÄ A:</label><input type="text" class="falsch falsch" value="${data.falsch[0] || ''}">
          <label>NesprÃ¡vna odpoveÄ B:</label><input type="text" class="falsch falsch" value="${data.falsch[1] || ''}">
          <label>NesprÃ¡vna odpoveÄ C:</label><input type="text" class="falsch falsch" value="${data.falsch[2] || ''}">
        `;
        fragenContainer.appendChild(block);
      });
    } else {
      addFrage();
    }
  };

  function addFrage() {
    const block = document.createElement("div");
    block.className = "frage-block";
    block.innerHTML = `
      <label>Znenie otÃ¡zky:</label><input type="text" class="frage frage">
      <label>SprÃ¡vna odpoveÄ:</label><input type="text" class="richtig richtig">
      <label>NesprÃ¡vna odpoveÄ A:</label><input type="text" class="falsch falsch">
      <label>NesprÃ¡vna odpoveÄ B:</label><input type="text" class="falsch falsch">
      <label>NesprÃ¡vna odpoveÄ C:</label><input type="text" class="falsch falsch">
    `;
    fragenContainer.appendChild(block);
    saveBlocks();
  }

  function saveBlocks() {
    const blocks = document.querySelectorAll(".frage-block");
    const data = Array.from(blocks).map(block => {
      return {
        frage: block.querySelector(".frage").value,
        richtig: block.querySelector(".richtig").value,
        falsch: Array.from(block.querySelectorAll(".falsch")).map(f => f.value)
      };
    });
    localStorage.setItem("quizData", JSON.stringify(data));
  }

  fragenContainer.addEventListener("input", saveBlocks);

  function generateQuiz() {
    const blocks = document.querySelectorAll(".frage-block");
    const frageLang = document.getElementById("frageSprache").value;
    const antwortLang = document.getElementById("antwortSprache").value;

    let html = `<!DOCTYPE html><html lang="de"><head><meta charset="UTF-8"><title>KvÃ­z</title><style>
    body{font-family:monospace;margin:20px;background:#f2f2f2;}
    .question{margin-bottom:30px;padding:15px;background:#fff;border-radius:8px;box-shadow:0 0 5px rgba(0,0,0,0.1);}
    .btn-group{display:flex;flex-direction:column;gap:10px;max-width:500px;}
    .btn-option{background:#e0e0e0;border:none;padding:10px 15px;border-radius:6px;cursor:pointer;text-align:left;width:200px;}
    .btn-option:hover{background:#d0d0d0;}
    .btn-option:disabled{background:#ccc;cursor:default;}
    .speak-btn{background:#2196F3;color:white;border:none;border-radius:5px;padding:8px 10px;cursor:pointer;}
    .speak-btn:hover{background:#1976D2;}
    .feedback{margin-top:10px;font-weight:bold;}
    #result{font-size:18px;font-weight:bold;margin-top:30px;color:#0078D4;}
    </style></head><body><h1>KvÃ­z</h1>`;

    html += `<script>
    let score=0,answered=0,total=0;
    function check(btn,sel,cor,id){const f=document.getElementById(id);
    btn.parentElement.querySelectorAll(".btn-option").forEach(b=>b.disabled=true);
    if(sel===cor){f.textContent="âœ… SprÃ¡vne ğŸ™‚";f.style.color="green";score++;}
    else{f.textContent="âŒ NesprÃ¡vne â˜¹";f.style.color="red";}
    answered++;if(answered===total){document.getElementById("result").textContent=
    "Odpovedal/a si sprÃ¡vne na "+score+" z "+total+" otÃ¡zok. ğŸ‰";}}
    function speak(text, lang){const u=new SpeechSynthesisUtterance(text);u.lang=lang;speechSynthesis.speak(u);}
    <\/script>`;

    let validCount = 0;

    blocks.forEach((block, i) => {
      const frage = block.querySelector(".frage").value.trim();
      const richtig = block.querySelector(".richtig").value.trim();
      const falschInputs = block.querySelectorAll(".falsch");
      const falsch = Array.from(falschInputs).map(f => f.value.trim()).filter(f => f !== "");
      if (!frage || !richtig) return;

      const antworten = [richtig, ...falsch];
      const shuffled = antworten.map((text, idx) => {
        const escaped = text.replace(/'/g, "\\'");
        return `
          <div style="display:flex;gap:10px;align-items:center;">
            <button class="btn-option" onclick="check(this,${idx},0,'f${i}')">${text}</button>
            <button class="speak-btn" onclick="speak('${escaped}','${antwortLang}')">ğŸ”Š</button>
          </div>
        `;
      }).sort(() => Math.random() - 0.5);

      html += `<div class="question">
  <h2>${validCount + 1}. ${frage}</h2>
  <button class="speak-btn" onclick="speak('${frage.replace(/'/g, "\\'")}','${frageLang}')">ğŸ”Š VypoÄuÅ¥ si otÃ¡zku</button>
  <div class="btn-group" style="margin-top: 15px;">${shuffled.join("")}</div>
  <div class="feedback" id="f${i}"></div>
</div>`;

      validCount++;
    });

    html += `<div id="result"></div><script>total=${validCount};<\/script>
<br><br>
  <b>Spracovala pomocou UI:</b> Mgr. Erika MatyiovÃ¡ (2025)
<br><br>
	</body></html>`;
    outputField.value = html;
  }

  function copyOutput() {
    outputField.select();
    document.execCommand("copy");
    alert("âœ… Obsah sa skopÃ­roval!");
  }

  function saveAsHTML() {
    const blob = new Blob([outputField.value], { type: "text/html" });
    const link = document.createElement("a");
    link.href = URL.createObjectURL(blob);
    link.download = "kviz_.html";
    link.click();
  }
</script>
<br><br>
  <b>Spracovala pomocou UI:</b> Mgr. Erika MatyiovÃ¡ (2025)
<br><br>
</body>
</html>
<!DOCTYPE html>
<html lang="sk">
<head>
<meta charset="UTF-8">
<title>Všeobecný generátor skloňovania v slovenčine</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background-color: #f0f4f8;
    padding: 20px;
  }
  h2 {
    text-align: center;
    margin-bottom: 16px;
  }
  .inputs {
    max-width: 900px;
    margin: 0 auto 16px auto;
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 8px;
  }
  .inputs .group-label {
    grid-column: 1 / -1;
    margin-top: 8px;
    font-weight: bold;
    color: #333;
  }
  .inputs input[type="text"] {
    width: 100%;
    padding: 8px;
    font-size: 16px;
    box-sizing: border-box;
  }
  .buttons {
    max-width: 900px;
    margin: 8px auto 20px auto;
    display: flex;
    gap: 10px;
    justify-content: center;
    flex-wrap: wrap;
	font-size: 16px;
  }
  button {
    padding: 10px 14px;
    font-size: 18px;
    cursor: pointer;
  }

  /* Tabuľka */
  table {
    border-collapse: collapse;
    margin: 0 auto;
    border: 2px solid white;
  }
  th, td {
    border: 2px solid #ccc;
    width: 180px;
    height: 60px;
    text-align: center;
    font-size: 17px;
  }
  th {
    background-color: white;
    color: black;
  }
  .white-cell {
    background-color: white;
    color: black;
	font-size: 17px;
    font-weight: normal;
  }

  /* Farby buniek podľa radu/stĺpca */
  .lightblue   { background-color: #add8e6; }  /* N - MR */
  .lightpink   { background-color: #ffb6c1; }  /* N - ŽR */
  .lightgreen  { background-color: #90ee90; }  /* N - SR */
  .lightgray   { background-color: #d3d3d3; }  /* N - Pl. */

  .lightpurple { background-color: #dda0dd; }  /* G */
  .lightorange { background-color: #ffd580; }  /* D */
  .darkgreen   { background-color: #3cb371; }  /* A */

  .lightbrown  { background-color: #deb887; }  /* L - svetlohnedá */
  .wheat       { background-color: #fdedce; }  /* I - svetlá pšenica */

  /* väčšie písmo vo farebných bunkách s odpoveďami */
  td[data-answer] {
    font-size: 20px;
    font-weight: bold;
    cursor: pointer;
    user-select: none;
  }

  .message {
    text-align: center;
    font-size: 18px;
    margin: 8px 0 10px 0;
  }
 
  .score {
    text-align: center;
    font-size: 20px;
    margin-top: 15px;
    font-weight: bold;
  }

 /* Banka a hodnotenie */
.bank { 
  text-align: center; 
  margin: 20px 0; 
}

.bank-item { 
  display: inline-block; 
  padding: 5px 10px; 
  margin: 5px; 
  background: #eef; 
  font-size: 20px;
  border: 1px solid #99c; 
  border-radius: 4px; 
  cursor: pointer; 
}


/* Správne/nesprávne – bunky pod hlavičkou a napravo od 1. stĺpca */
#exerciseTable tr:not(:first-child) td:not(:first-child).correct {
  box-shadow: inset 0 0 0 2px green !important;
}

#exerciseTable tr:not(:first-child) td:not(:first-child).incorrect {
  box-shadow: inset 0 0 0 2px red !important;
}

  
 /* Len prvý stĺpec tabuľky */
#exerciseTable td.white-cell,
#exerciseTable th:first-child {
  width: 250px; /* nastav si podľa potreby */
}

/* Sivé horizontálne orámovanie v 1. stĺpci pod 1.–6. bunkou */
#exerciseTable td.white-cell {
  border-bottom: 2px solid #ccc; /* jemná sivá, hrúbka 2px */
}


/* Sivá čiara pod celým riadkom hlavičky */
#exerciseTable tr:first-child th {
  border-bottom: 2px solid #ccc;
}

</style>
</head>
<body>

<h2>Všeobecný generátor skloňovania v slovenčine</h2>

<div class="inputs" id="inputsPanel">
  <div class="group-label">Nominatív (N)</div>
  <input id="n_mr" type="text" placeholder="N - MR">
  <input id="n_zr" type="text" placeholder="N - ŽR">
  <input id="n_sr" type="text" placeholder="N - SR">
  <input id="n_pl" type="text" placeholder="N - Pl.">

  <div class="group-label">Genitív (G)</div>
  <input id="g_mr" type="text" placeholder="G - MR">
  <input id="g_zr" type="text" placeholder="G - ŽR">
  <input id="g_sr" type="text" placeholder="G - SR">
  <input id="g_pl" type="text" placeholder="G - Pl.">

  <div class="group-label">Datív (D)</div>
  <input id="d_mr" type="text" placeholder="D - MR">
  <input id="d_zr" type="text" placeholder="D - ŽR">
  <input id="d_sr" type="text" placeholder="D - SR">
  <input id="d_pl" type="text" placeholder="D - Pl.">

  <div class="group-label">Akuzatív (A)</div>
  <input id="a_mr" type="text" placeholder="A - MR">
  <input id="a_zr" type="text" placeholder="A - ŽR">
  <input id="a_sr" type="text" placeholder="A - SR">
  <input id="a_pl" type="text" placeholder="A - Pl.">

  <div class="group-label">Lokál (L)</div>
  <input id="l_mr" type="text" placeholder="L - MR">
  <input id="l_zr" type="text" placeholder="L - ŽR">
  <input id="l_sr" type="text" placeholder="L - SR">
  <input id="l_pl" type="text" placeholder="L - Pl.">

  <div class="group-label">Inštrumentál (I)</div>
  <input id="i_mr" type="text" placeholder="I - MR">
  <input id="i_zr" type="text" placeholder="I - ŽR">
  <input id="i_sr" type="text" placeholder="I - SR">
  <input id="i_pl" type="text" placeholder="I - Pl.">
</div>

<div class="buttons">
  <button id="btnGenerate">Generovať cvičenie</button>
  <button id="btnSave">Uložiť cvičenie ako HTML</button>
  <button id="btnCheck">Vyhodnotiť</button>
  <button id="btnReset">Reset</button>
  <button id="btnClearStorage">Vymazať uložené údaje</button>
</div>

<div id="currentItem"></div>
<div id="feedback" class="message"></div>

<div style="text-align:center; margin-bottom: 16px;">
  <p>Rozmiestni jednotlivé položky do buniek podľa pokynov.<br>
  Ak chceš svoje rozhodnutie zmeniť, klikni na danú bunku dvakrát a potom pokračuj v priraďovaní.<br>
  Po ukončení klikni na tlačidlo "Vyhodnotiť".</p>
  <p><strong>Krok 1:</strong> Klikni na bunku.<br>
     <strong>Krok 2:</strong> Klikni na položku pod tabuľkou.</p>
</div>

<table id="exerciseTable">
  <tr>
    <th>pád</th>
    <th>mužský rod</th>
    <th>ženský rod</th>
    <th>stredný rod</th>
    <th>množné číslo</th>
  </tr>
  <tr>
    <td class="white-cell nominativ-cell"><strong>nominatív</strong><br>Kto? Čo?<br>(... je to?)</td>
    <td class="lightblue"   data-key="n_mr" data-answer=""></td>
    <td class="lightpink"   data-key="n_zr" data-answer=""></td>
    <td class="lightgreen"  data-key="n_sr" data-answer=""></td>
    <td class="lightgray"   data-key="n_pl" data-answer=""></td>
  </tr>
  <tr>
    <td class="white-cell"><strong>genitív</strong><br>Koho? Čoho?<br>(Od/Bez ... ?)</td>
    <td class="lightpurple" data-key="g_mr" data-answer=""></td>
    <td class="lightpurple" data-key="g_zr" data-answer=""></td>
    <td class="lightpurple" data-key="g_sr" data-answer=""></td>
    <td class="lightpurple" data-key="g_pl" data-answer=""></td>
  </tr>
  <tr>
    <td class="white-cell"><strong>datív</strong><br>Komu? Čomu?<br>(... to dám?)</td>
    <td class="lightorange" data-key="d_mr" data-answer=""></td>
    <td class="lightorange" data-key="d_zr" data-answer=""></td>
    <td class="lightorange" data-key="d_sr" data-answer=""></td>
    <td class="lightorange" data-key="d_pl" data-answer=""></td>
  </tr>
  <tr>
    <td class="white-cell"><strong>akuzatív</strong><br>Koho? Čo?<br>(... vidím?)</td>
    <td class="darkgreen"   data-key="a_mr" data-answer=""></td>
    <td class="darkgreen"   data-key="a_zr" data-answer=""></td>
    <td class="darkgreen"   data-key="a_sr" data-answer=""></td>
    <td class="darkgreen"   data-key="a_pl" data-answer=""></td>
  </tr>
  <tr>
    <td class="white-cell"><strong>lokál</strong><br>O kom? O čom?<br>(... píšem?)</td>
    <td class="lightbrown"  data-key="l_mr" data-answer=""></td>
    <td class="lightbrown"  data-key="l_zr" data-answer=""></td>
    <td class="lightbrown"  data-key="l_sr" data-answer=""></td>
    <td class="lightbrown"  data-key="l_pl" data-answer=""></td>
  </tr>
  <tr>
    <td class="white-cell"><strong>inštrumentál</strong><br>S kým? S čím?<br>(... sa hrám?)</td>
    <td class="wheat"       data-key="i_mr" data-answer=""></td>
    <td class="wheat"       data-key="i_zr" data-answer=""></td>
    <td class="wheat"       data-key="i_sr" data-answer=""></td>
    <td class="wheat"       data-key="i_pl" data-answer=""></td>
  </tr>
</table>

<div class="bank" id="bank"></div>
<div class="score" id="score"></div>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const table = document.getElementById('exerciseTable');
  const bank = document.getElementById('bank');
  const scoreEl = document.getElementById('score');
  const btnGenerate = document.getElementById('btnGenerate');
  const btnCheck = document.getElementById('btnCheck');
  const btnReset = document.getElementById('btnReset');
  const btnClearStorage = document.getElementById('btnClearStorage');
  const inputFields = Array.from(document.querySelectorAll('.inputs input'));

  let selectedCell = null;

  // Kliknutie na bunku
  table.addEventListener('click', e => {
    if (e.target.tagName === 'TD' && e.target.dataset.key) {
      selectedCell = e.target;
      table.querySelectorAll('td').forEach(td => td.classList.remove('selected'));
      e.target.classList.add('selected');
    }
  });

  // Dvojklik – vymazanie a vrátenie do banky
  table.addEventListener('dblclick', e => {
    if (e.target.tagName === 'TD' && e.target.dataset.key && e.target.textContent.trim() !== '') {
      const word = e.target.textContent.trim();
      e.target.textContent = '';
      e.target.classList.remove('correct', 'incorrect', 'selected');
      const span = document.createElement('span');
      span.className = 'bank-item';
      span.textContent = word;
      bank.appendChild(span);
    }
  });

  // Kliknutie na banku – vloženie do označenej bunky
  bank.addEventListener('click', e => {
    if (e.target.classList.contains('bank-item') && selectedCell && selectedCell.textContent.trim() === '') {
      selectedCell.textContent = e.target.textContent;
      e.target.remove();
      selectedCell.classList.remove('selected');
      selectedCell = null;
    }
  });

  // Generovanie cvičenia
  btnGenerate.addEventListener('click', () => {
    bank.innerHTML = '';
    scoreEl.textContent = '';
    scoreEl.style.color = '';

    table.querySelectorAll('td[data-key]').forEach(td => {
      td.textContent = '';
      td.classList.remove('correct', 'incorrect', 'selected');
      const sourceInput = document.getElementById(td.dataset.key);
      td.dataset.answer = sourceInput ? sourceInput.value.trim() : '';
    });

    const words = [];
    inputFields.forEach(inp => {
      if (inp.value.trim() !== '') words.push(inp.value.trim());
    });

    // premiešanie
    for (let i = words.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [words[i], words[j]] = [words[j], words[i]];
    }

    words.forEach(w => {
      const span = document.createElement('span');
      span.className = 'bank-item';
      span.textContent = w;
      bank.appendChild(span);
    });
  });

  // Vyhodnotenie s percentami a farbou
  btnCheck.addEventListener('click', () => {
    let correctCount = 0;
    let total = 0;

    table.querySelectorAll('td[data-key]').forEach(td => {
      if (td.dataset.answer !== undefined) {
        total++;
        td.classList.remove('correct', 'incorrect');
        if (td.textContent.trim() === td.dataset.answer) {
          td.classList.add('correct');
          correctCount++;
        } else {
          td.classList.add('incorrect');
        }
      }
    });

    const percentNum = total > 0 ? (correctCount / total) * 100 : 0;
    const percent = percentNum.toFixed(1);
    scoreEl.textContent = `Skóre: ${correctCount} / ${total} (${percent} %)`;

    if (percentNum >= 80) {
      scoreEl.style.color = 'green';
    } else if (percentNum >= 50) {
      scoreEl.style.color = 'orange';
    } else {
      scoreEl.style.color = 'red';
    }
  });

  // Reset
  btnReset.addEventListener('click', () => {
    bank.innerHTML = '';
    scoreEl.textContent = '';
    scoreEl.style.color = '';
    table.querySelectorAll('td[data-key]').forEach(td => {
      if (td.textContent.trim() !== '') {
        const span = document.createElement('span');
        span.className = 'bank-item';
        span.textContent = td.textContent.trim();
        bank.appendChild(span);
      }
      td.textContent = '';
      td.classList.remove('correct', 'incorrect', 'selected');
    });
  });

  // --- Ukladanie a načítanie inputov z localStorage ---
  inputFields.forEach(inp => {
    const savedValue = localStorage.getItem(inp.id);
    if (savedValue !== null) {
      inp.value = savedValue;
    }
  });

  inputFields.forEach(inp => {
    inp.addEventListener('input', () => {
      localStorage.setItem(inp.id, inp.value);
    });
  });

  btnClearStorage.addEventListener('click', () => {
    inputFields.forEach(inp => {
      localStorage.removeItem(inp.id);
      inp.value = '';
    });
    alert('Uložené údaje boli vymazané.');
  });
});
</script>

<script>
document.getElementById('btnSave').addEventListener('click', () => {
  const pageTitle = prompt('Zadaj nadpis stránky:', 'Skloňovanie – cvičenie');
  if (!pageTitle) return;

  const fileName = prompt('Zadaj názov súboru (bez prípony):', 'cvicenie_sklonovanie');
  if (!fileName) return;

  // Získaj odpovede z inputov
  const cellData = [];
  document.querySelectorAll('td[data-key]').forEach(td => {
    const key = td.dataset.key;
    const input = document.getElementById(key);
    const value = input ? input.value.trim() : '';
    cellData.push({ key, value, className: td.className });
  });

  const words = cellData.map(c => c.value).filter(v => v !== '');
  for (let i = words.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [words[i], words[j]] = [words[j], words[i]];
  }

  const generateRow = (label, keys) => {
    const tds = keys.map(k => {
      const cell = cellData.find(c => c.key === k);
      return `<td class="${cell.className}" data-key="${cell.key}" data-answer="${cell.value}"></td>`;
    }).join('');
    return `<tr><td class="white-cell">${label}</td>${tds}</tr>`;
  };

  const htmlContent = `<!DOCTYPE html>
<html lang="sk">
<head>
<meta charset="UTF-8">
<title>${pageTitle}</title>
<style>
  body { font-family: Arial, sans-serif; background-color: #f0f4f8; padding: 20px; }
  h2 { text-align: center; margin-bottom: 16px; }
  table { border-collapse: collapse; margin: 0 auto; border: 2px solid white; }
  th, td { border: 2px solid #ccc; width: 180px; height: 60px; text-align: center; font-size: 17px; }
  th { background-color: white; color: black; }
  .white-cell { background-color: white; color: black; font-weight: bold; }
  .lightblue   { background-color: #add8e6; }
  .lightpink   { background-color: #ffb6c1; }
  .lightgreen  { background-color: #90ee90; }
  .lightgray   { background-color: #d3d3d3; }
  .lightpurple { background-color: #dda0dd; }
  .lightorange { background-color: #ffd580; }
  .darkgreen   { background-color: #3cb371; }
  .lightbrown  { background-color: #deb887; }
  .wheat       { background-color: #fdedce; }  /* I - svetlá pšenica */
  td[data-answer] { font-size: 20px; font-weight: bold; cursor: pointer; user-select: none; }
 .bank { 
  text-align: center; 
  margin: 20px 0; 
}

.bank-item { 
  display: inline-block; 
  padding: 5px 10px; 
  margin: 5px; 
  background: #eef; 
  font-size: 20px;
  border: 1px solid #99c; 
  border-radius: 4px; 
  cursor: pointer; 
}


/* Správne/nesprávne – bunky pod hlavičkou a napravo od 1. stĺpca */
#exerciseTable tr:not(:first-child) td:not(:first-child).correct {
  box-shadow: inset 0 0 0 2px green !important;
}

#exerciseTable tr:not(:first-child) td:not(:first-child).incorrect {
  box-shadow: inset 0 0 0 2px red !important;
}

  
 /* Len prvý stĺpec tabuľky */
#exerciseTable td.white-cell,
#exerciseTable th:first-child {
  width: 250px; /* nastav si podľa potreby */
}

/* Sivé horizontálne orámovanie v 1. stĺpci pod 1.–6. bunkou */
#exerciseTable td.white-cell {
  border-bottom: 2px solid #ccc; /* jemná sivá, hrúbka 2px */
}


/* Sivá čiara pod celým riadkom hlavičky */
#exerciseTable tr:first-child th {
  border-bottom: 2px solid #ccc;
}

</style>

</head>
<body>

<h2>${pageTitle}</h2>
<div style="text-align:center; margin-bottom: 16px;">
  <p>Rozmiestni jednotlivé položky do buniek podľa pokynov.<br>
  Ak chceš svoje rozhodnutie zmeniť, klikni na danú bunku dvakrát a potom pokračuj v priraďovaní.<br>
  Po ukončení cvičenia stlač klávesu <strong>V</strong>.</p>
  <p><strong>Krok 1:</strong> Klikni na bunku.<br>
     <strong>Krok 2:</strong> Klikni na položku pod tabuľkou.</p>
</div>

<table id="exerciseTable">
  <tr>
    <th>pád</th>
    <th>mužský rod</th>
    <th>ženský rod</th>
    <th>stredný rod</th>
    <th>množné číslo</th>
  </tr>
  ${generateRow('<strong>nominatív</strong><br>Kto? Čo?<br>(... je to?)', ['n_mr','n_zr','n_sr','n_pl'])}
  ${generateRow('<strong>genitív</strong><br>Koho? Čoho?<br>(Od/Bez ... ?)', ['g_mr','g_zr','g_sr','g_pl'])}
  ${generateRow('<strong>datív</strong><br>Komu? Čomu?<br>(... to dám?)', ['d_mr','d_zr','d_sr','d_pl'])}
  ${generateRow('<strong>akuzatív</strong><br>Koho? Čo?<br>(... vidím?)', ['a_mr','a_zr','a_sr','a_pl'])}
  ${generateRow('<strong>lokál</strong><br>O kom? O čom?<br>(... píšem?)', ['l_mr','l_zr','l_sr','l_pl'])}
  ${generateRow('<strong>inštrumentál</strong><br>S kým? S čím?<br>(... sa hrám?)', ['i_mr','i_zr','i_sr','i_pl'])}
</table>

<div class="bank" id="bank">
  ${words.map(w => `<span class="bank-item">${w}</span>`).join('')}
</div>

<div class="score" id="scoreDisplay"></div>

<script>
  const table = document.getElementById("exerciseTable");
  const bank = document.getElementById("bank");
  const scoreEl = document.getElementById("scoreDisplay");
  let selectedCell = null;

  table.addEventListener("click", e => {
    if (e.target.tagName === "TD" && e.target.dataset.key) {
      selectedCell = e.target;
      table.querySelectorAll("td").forEach(td => td.classList.remove("selected"));
      e.target.classList.add("selected");
    }
  });

  table.addEventListener("dblclick", e => {
    if (e.target.tagName === "TD" && e.target.dataset.key && e.target.textContent.trim() !== "") {
      const word = e.target.textContent.trim();
      e.target.textContent = "";
      e.target.classList.remove("correct", "incorrect", "selected");
      const span = document.createElement("span");
      span.className = "bank-item";
      span.textContent = word;
      bank.appendChild(span);
    }
  });

  bank.addEventListener("click", e => {
    if (e.target.classList.contains("bank-item") && selectedCell && selectedCell.textContent.trim() === "") {
      selectedCell.textContent = e.target.textContent;
      e.target.remove();
      selectedCell.classList.remove("selected");
      selectedCell = null;
    }
  });

  document.addEventListener("keydown", e => {
    if (e.key === "v") {
      let correct = 0;
      let total = 0;
      table.querySelectorAll("td[data-answer]").forEach(td => {
        total++;
        td.classList.remove("correct", "incorrect");
        if (td.textContent.trim() === td.dataset.answer) {
          td.classList.add("correct");
          correct++;
        } else {
          td.classList.add("incorrect");
        }
      });
      const percent = total > 0 ? Math.round((correct / total) * 100) : 0;
      scoreEl.textContent = \`Skóre: \${correct} / \${total} (\${percent} %)\`;
      scoreEl.style.color = percent >= 80 ? "green" : percent >= 50 ? "orange" : "red";
    }
  });
<\/script>
<br><br>
<b>Spracovala pomocou UI:</b> Mgr. Erika Matyiová (2025)
<br><br>
</body>
</html>`;

  const blob = new Blob([htmlContent], { type: "text/html;charset=utf-8" });
  const a = document.createElement("a");
  a.href = URL.createObjectURL(blob);
  a.download = fileName.endsWith('.html') ? fileName : `${fileName}.html`;
  document.body.appendChild(a);
  a.click();
  setTimeout(() => {
    URL.revokeObjectURL(a.href);
    a.remove();
  }, 100);
});
</script>
<br><br>
<b>Spracovala pomocou UI:</b> Mgr. Erika Matyiová (2025)
<br><br>
</body>
</html>
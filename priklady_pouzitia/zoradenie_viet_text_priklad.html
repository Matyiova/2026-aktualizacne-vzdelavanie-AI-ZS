<!doctype html>
<html lang="sk">
<head>
<meta charset="utf-8">
<title>Zoradenie viet - cvičenie</title>
<style>
  body{font-family:Courier bold,monospace;max-width:1000px;margin:2em auto;padding:0 1em}
  .task{border:1px solid #ccc;padding:1em;margin-bottom:1.5em;border-radius:4px}
  .task-content { display:flex; align-items:center; gap:1em; margin-bottom:1em; } .slots{flex:1;display:flex;flex-direction:column;gap:.5em;position:relative;z-index:0}
  .slot{min-height:1.6em; border:2px dashed #888;padding:.5em;cursor:pointer;white-space:pre-wrap;text-align:left}
  .slot.correct{border-color:green;background:#e0ffe0}
  .slot.incorrect{border-color:red;background:#ffe0e0}
  .cards{flex:1;display:flex;flex-wrap:wrap;gap:.5em;position:relative;z-index:1}
  .card{background:#f0f0f0;padding:.5em 1em;border:1px solid #888;border-radius:4px;cursor:pointer;display:flex;flex-direction:column;align-items:flex-start}
  .card-line{display:block;width:100%;text-align:left;margin-bottom:.2em}
  .card.selected{background:#d0e6ff;box-shadow:0 0 0 2px #007BFF;transform:scale(1.02)}
  .buttons{display:flex;gap:1em;margin-top:1em}
</style>
</head>
<body>
<h1>Zoradenie viet v texte - IA cvičenie</h1>
<p>Klikni najprv na kartičku, potom na bunku. Kliknutím na vložený text ho vrátiš späť.</p>

<div class="task" data-index="0">
  <h2>Úloha 1</h2>
  <div class="task-content">
    <div class="slots"><div class="slot" data-slot="0"></div><div class="slot" data-slot="1"></div><div class="slot" data-slot="2"></div><div class="slot" data-slot="3"></div><div class="slot" data-slot="4"></div><div class="slot" data-slot="5"></div><div class="slot" data-slot="6"></div></div>
    <div class="cards">
        <div class="card" data-raw="No prišiel Miško Muška –	šuch – kriedu do vrecúška!">
          <div class="card-line">No prišiel Miško Muška –</div><div class="card-line">šuch – kriedu do vrecúška!</div>
        </div>
        <div class="card" data-raw="A žiaci v triede veľkú nulu	písali prstom na tabuľu.">
          <div class="card-line">A žiaci v triede veľkú nulu</div><div class="card-line">písali prstom na tabuľu.</div>
        </div>
        <div class="card" data-raw="A potom Muška, Hruška, Šuška,	čo skryli kriedu do vrecúška,	našli si plôtik dáky,	čmárali haky-baky.">
          <div class="card-line">A potom Muška, Hruška, Šuška,</div><div class="card-line">čo skryli kriedu do vrecúška,</div><div class="card-line">našli si plôtik dáky,</div><div class="card-line">čmárali haky-baky.</div>
        </div>
        <div class="card" data-raw="A prišiel Šaňko Šuška –	šuch – kriedu do vrecúška!">
          <div class="card-line">A prišiel Šaňko Šuška –</div><div class="card-line">šuch – kriedu do vrecúška!</div>
        </div>
        <div class="card" data-raw="Bola raz jedna trieda,	v tej triede bola krieda.	Tá krieda bola biela	a bolo jej dosť veľa.">
          <div class="card-line">Bola raz jedna trieda,</div><div class="card-line">v tej triede bola krieda.</div><div class="card-line">Tá krieda bola biela</div><div class="card-line">a bolo jej dosť veľa.</div>
        </div>
        <div class="card" data-raw="A prišiel Ďurko Hruška –	šuch – kriedu do vrecúška!">
          <div class="card-line">A prišiel Ďurko Hruška –</div><div class="card-line">šuch – kriedu do vrecúška!</div>
        </div>
        <div class="card" data-raw="Vo vreckách bola krieda,	nemala kriedu trieda.">
          <div class="card-line">Vo vreckách bola krieda,</div><div class="card-line">nemala kriedu trieda.</div>
        </div></div>
  </div>
  <div class="buttons">
    <button class="check">Vyhodnotiť</button>
    <button class="retry">Opakovať pokus</button>
  </div>
  <div class="result"></div>
</div>
<script>
const originalData = [["Bola raz jedna trieda,\tv tej triede bola krieda.\tTá krieda bola biela\ta bolo jej dosť veľa.","No prišiel Miško Muška –\tšuch – kriedu do vrecúška!","A prišiel Ďurko Hruška –\tšuch – kriedu do vrecúška!","A prišiel Šaňko Šuška –\tšuch – kriedu do vrecúška!","Vo vreckách bola krieda,\tnemala kriedu trieda.","A potom Muška, Hruška, Šuška,\tčo skryli kriedu do vrecúška,\tnašli si plôtik dáky,\tčmárali haky-baky.","A žiaci v triede veľkú nulu\tpísali prstom na tabuľu."]];
function shuffle(arr){
  for(let i=arr.length-1;i>0;i--){
    const j=Math.floor(Math.random()*(i+1));
    [arr[i],arr[j]]=[arr[j],arr[i]];
  }
  return arr;
}
function normalize(s){return String(s).replace(/\t/g,'').trim()}

document.querySelectorAll('.task').forEach(taskEl=>{
  const idx=+taskEl.dataset.index;
  const slotsEl=taskEl.querySelector('.slots');
  const cardsEl=taskEl.querySelector('.cards');
  const resultEl=taskEl.querySelector('.result');
  let selectedCard=null;

  function createCardFromRaw(raw) {
    const card = document.createElement('div');
    card.className = 'card';
    card.dataset.raw = raw;
    raw.split('\t').forEach(p=>{
      const line = document.createElement('div');
      line.className = 'card-line';
      line.textContent = p;
      card.appendChild(line);
    });
    return card;
  }

  // výber kartičky
  cardsEl.addEventListener('click', e=>{
    const card = e.target.closest('.card');
    if(!card) return;
    if(selectedCard) selectedCard.classList.remove('selected');
    selectedCard = card;
    selectedCard.classList.add('selected');
  });

  // klik na slot
  slotsEl.addEventListener('click', e=>{
    const slot = e.target.closest('.slot');
    if(!slot) return;

    // ak je vybraná kartička
    if(selectedCard){
      const rawNew = selectedCard.dataset.raw || selectedCard.textContent;

      // ak slot obsahuje presne rovnakú položku -> zrušiť výber
      if(slot.dataset.value && slot.dataset.value === rawNew){
        selectedCard.classList.remove('selected');
        selectedCard = null;
        return;
      }

      // ak slot obsahuje inú položku, vrátime ju späť medzi cards
      if(slot.dataset.value){
        const rawOld = slot.dataset.value;
        const oldCard = createCardFromRaw(rawOld);
        cardsEl.appendChild(oldCard);
      }

      // vloženie novej kartičky do slotu
      slot.innerHTML = '';
      rawNew.split('\t').forEach(part=>{
        const div = document.createElement('div');
        div.textContent = part;
        slot.appendChild(div);
      });
      slot.dataset.value = rawNew;

      // odstránime vybranú kartičku z oblasti cards (ak ešte existuje)
      if(selectedCard.parentElement) selectedCard.remove();
      selectedCard = null;
      return;
    }

    // bez vybratej kartičky: vrátenie textu zo slotu späť ako kartička
    if(slot.dataset.value){
      const raw = slot.dataset.value;
      slot.innerHTML = '';
      delete slot.dataset.value;
      slot.classList.remove('correct','incorrect');

      const card = createCardFromRaw(raw);
      cardsEl.append(card);
    }
  });

  // vyhodnotenie
  taskEl.querySelector('.check').addEventListener('click', ()=>{
    const total = slotsEl.children.length;
    let correctCount = 0;
    slotsEl.querySelectorAll('.slot').forEach((slot,pos)=>{
      slot.classList.remove('correct','incorrect');
      if(normalize(slot.dataset.value||'') === normalize(originalData[idx][pos])){
        slot.classList.add('correct'); correctCount++;
      } else slot.classList.add('incorrect');
    });

    const percent = Math.round((correctCount/total)*100);

    resultEl.textContent = '';

    const emptyLine = document.createElement('div');
    emptyLine.style.minHeight = '1em';
    resultEl.appendChild(emptyLine);

    const resultLine = document.createElement('div');
    resultLine.textContent = 'Body: ' + correctCount + ' z ' + total + '  |  Percentuálne: ' + percent + '%';
    resultEl.appendChild(resultLine);
  });

  // opakovanie
  taskEl.querySelector('.retry').addEventListener('click', ()=>{
    resultEl.textContent='';
    slotsEl.querySelectorAll('.slot').forEach(slot=>{
      slot.textContent='';
      delete slot.dataset.value;
      slot.classList.remove('correct','incorrect')
    });
    cardsEl.innerHTML='';
    shuffle([...originalData[idx]]).forEach(raw=>{
      const card=document.createElement('div');
      card.className='card';
      card.dataset.raw = raw;
      raw.split('\t').forEach(p=>{
        const line=document.createElement('div');
        line.className='card-line';
        line.textContent=p;
        card.appendChild(line);
      });
      cardsEl.append(card);
    });
    selectedCard = null;
  });
});
</script>
<br><br>
  &nbsp;&nbsp;<b>Spracovala pomocou UI:</b> Mgr. Erika Matyiová (2025)
  <br><br>
</body>
</html>
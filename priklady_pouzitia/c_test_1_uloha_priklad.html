<!doctype html><html lang="sk"><head><meta charset="utf-8"><title>Slovenský jazyk a literatúra - Básne</title><style>body{font-family:Courier bold, monospace;margin:20px;font-size:115%;line-height:1.6}h1{margin-top:0}.gap{display:inline-block;margin:0 2px;padding:0 2px;border-radius:2px;font-family:monospace;letter-spacing:0.3em;color:#0b3d91;font-size:130%;font-weight:bold;cursor:pointer}.gap.selected{background:#cceeff}.gap.correct{background:#e6ffed;border:1px solid #34c759;color:#065f46;font-size:130%}.gap.incorrect{background:#ffecec;border:1px solid #ff3b30;color:#7a0010;font-size:130%}.choice{display:inline-block;margin:5px 6px 0 0;padding:5px 10px;background:#eee;border-radius:6px;cursor:pointer}.choice:hover{background:#ddd}.test-block{border:1px solid #ddd;padding:10px;margin-bottom:14px;white-space:pre-wrap}.meta{margin-top:12px}.choices-label{margin-top:12px;font-weight:bold}</style></head><body><h1>Slovenský jazyk a literatúra - Básne</h1><p style="font-weight: bold;">Klikni na miesto, kde niečo chýba a potom klikni na niektorú z položiek.<br>Ak si to rozmyslíš, klikni na uvedenú položku dvakrát a tá sa vráti na miesto.</p><label>Meno žiaka: <input id="studentName" type="text" style="padding:6px;width:300px"></label><div class="test-block" data-section="0"><div class="section-title"><b>Úloha 1</b><br><br></div><div class="content" id="content-0">Zleteli <span class="gap" data-gap="1" data-correct-len="4" data-current="">____(1)</span> z <span class="gap" data-gap="2" data-correct-len="5" data-current="">_____(2)</span>, tiahnu na <span class="gap" data-gap="3" data-correct-len="7" data-current="">_______(3)</span>, 
ponad vysoké <span class="gap" data-gap="4" data-correct-len="4" data-current="">____(4)</span>, ponad <span class="gap" data-gap="5" data-correct-len="5" data-current="">_____(5)</span> polia 
<span class="gap" data-gap="6" data-correct-len="9" data-current="">_________(6)</span> cez <span class="gap" data-gap="7" data-correct-len="5" data-current="">_____(7)</span>, cez tú <span class="gap" data-gap="8" data-correct-len="4" data-current="">____(8)</span> vodu, 
<span class="gap" data-gap="9" data-correct-len="5" data-current="">_____(9)</span> tam za pomedzím <span class="gap" data-gap="10" data-correct-len="11" data-current="">___________(10)</span> rodu.</div><div class="choices-label">Slová na doplnenie:</div><div class="choices" id="choices-0"><h3>Slová na doplnenie</h3><span class="choice">šíru</span><span class="choice">slovenského</span><span class="choice">Dunaj</span><span class="choice">sadli</span><span class="choice">preleteli</span><span class="choice">hory</span><span class="choice">podolia</span><span class="choice">rovné</span><span class="choice">orly</span><span class="choice">Tatry</span></div><div class="result" id="result-0"></div></div><button id="btnEvaluateAll">Vyhodnotiť všetky</button><div id="summary" class="meta"></div><script>(function(){
    function codePointLen(s){return Array.from(s||"").length;}
    function escapeHtml(s){return String(s||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;");}
    function shuffle(a){var t=a.slice();for(var i=t.length-1;i>0;i--){var j=Math.floor(Math.random()*(i+1));var tmp=t[i];t[i]=t[j];t[j]=tmp;}return t;}
    var secData=[{"answers":{"1":"orly","2":"Tatry","3":"podolia","4":"hory","5":"rovné","6":"preleteli","7":"Dunaj","8":"šíru","9":"sadli","10":"slovenského"}}];

    document.querySelectorAll(".test-block").forEach(function(block,idx){
      var choices = block.querySelector(".choices");
      var selected = null;
      var originalChoices = Array.from(choices.querySelectorAll(".choice")).map(c => c.textContent);
      choices.innerHTML = "";
      shuffle(originalChoices).forEach(function(txt){
        var c = document.createElement("span");
        c.className = "choice";
        c.textContent = txt;
        choices.appendChild(c);
      });

      block.querySelectorAll(".gap").forEach(function(g){
        g.dataset.current = g.dataset.current || "";
        g.addEventListener("click", function(){
          if(selected) selected.classList.remove("selected");
          selected = g;
          g.classList.add("selected");
        });
        g.addEventListener("dblclick", function(){
          var num = g.dataset.gap;
          var cur = g.dataset.current || "";
          if(cur){
            var back = document.createElement("span");
            back.className = "choice";
            back.textContent = cur;
            choices.appendChild(back);
          }
          var clen = Number(g.dataset.correctLen) || 0;
          g.textContent = "_".repeat(clen) + "(" + num + ")";
          g.dataset.current = "";
          g.classList.remove("selected","correct","incorrect");
          selected = null;
        });
      });

      choices.addEventListener("click", function(e){
        var c = e.target.closest(".choice");
        if(!c) return;
        if(!selected){ alert("Najprv kliknite na medzeru."); return; }
        var num = selected.dataset.gap;
        var cur = selected.dataset.current || "";
        if(cur){
          var back = document.createElement("span");
          back.className = "choice";
          back.textContent = cur;
          choices.appendChild(back);
        }
        selected.textContent = c.textContent + "(" + num + ")";
        selected.dataset.current = c.textContent;
        c.remove();
        selected.classList.remove("selected");
        selected = null;
      });
    });

    document.getElementById("btnEvaluateAll").addEventListener("click", function(){
      var sumOk = 0, sumTotal = 0;
      document.querySelectorAll(".test-block").forEach(function(block,idx){
        var answers = secData[idx].answers || {};
        var total = Object.keys(answers).length;
        var ok = 0;
        block.querySelectorAll(".gap").forEach(function(g){
          g.classList.remove("correct","incorrect");
          var num = g.dataset.gap;
          var correct = answers[num] || "";
          var user = g.dataset.current || "";
          var clen = Number(g.dataset.correctLen) || 0;
          var miss = Math.max(0, clen - codePointLen(user));
          g.textContent = (user || "") + "_".repeat(miss) + "(" + num + ")";
          if(user === correct){ g.classList.add("correct"); ok++; }
          else{ g.classList.add("incorrect"); }
        });
        sumOk += ok;
        sumTotal += total;
      });
      var pct = Math.round((sumOk / (sumTotal || 1)) * 100);
      var name = document.getElementById("studentName").value || "";
      var now = new Date();
      document.getElementById("summary").innerHTML =
        "<b>Názov testu:</b> " + escapeHtml("Slovenský jazyk a literatúra - Básne") +
        "<br><b>Meno žiaka:</b> " + escapeHtml(name) +
        "<br><b>Hodnotenie:</b> " + sumOk + "/" + sumTotal + " (" + pct + "%)" +
        "<br><b>Dátum a čas:</b> " + now.toLocaleString();
    });
  })();</script></body></html>
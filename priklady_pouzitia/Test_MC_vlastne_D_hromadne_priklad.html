<!DOCTYPE html>
<html lang="sk">
<head>
  <meta charset="UTF-8">
  <title>Test</title>
  <style>
    :root { --bg-light:#fff; --text-light:#000; --bg-dark:#001f3f; --text-dark:#fff; }
    body { font-family:Courier bold,monospace; font-size:120%; padding:20px; margin:0; background:var(--bg-light); color:var(--text-light); transition:0.3s; }
    body.dark-mode { background:var(--bg-dark); color:var(--text-dark); }
    #themeToggle { position:fixed; top:15px; right:15px; z-index:100; padding:6px 12px; border:none; border-radius:4px; background:#ddd; cursor:pointer; transition:0.3s; }
    #themeToggle.dark { background:#444; color:#fff; }
    .question-block { border:1px solid #ccc; padding:10px; margin:10px 0; border-radius:4px; }
    .question-title { font-weight:bold; margin-bottom:5px; }
    .answers label { display:block; margin:4px 0; padding:4px; border-radius:3px; }
    .missing { background:#ffe6b3; }
    .correct { background:#c8f7c5; }
    .incorrect { background:#f7c5d1; }
    body.dark-mode .missing, body.dark-mode .correct, body.dark-mode .incorrect { color:#000; }
  </style>
</head>
<body>
  <button id="themeToggle">üåô Tmav√Ω re≈æim</button>
  <h2>Dni v t√Ω≈ædni - Test s v√Ωberom z viacer√Ωch odpoved√≠</h2>
  <form id="quizForm"></form>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      var btn = document.getElementById('themeToggle');
      if (localStorage.getItem('theme') === 'dark') {
        document.body.classList.add('dark-mode');
        btn.classList.add('dark');
        btn.textContent = '‚òÄÔ∏è Svetl√Ω re≈æim';
      }
      btn.addEventListener('click', function() {
        var dark = document.body.classList.toggle('dark-mode');
        btn.classList.toggle('dark');
        btn.textContent = dark ? '‚òÄÔ∏è Svetl√Ω re≈æim' : 'üåô Tmav√Ω re≈æim';
        localStorage.setItem('theme', dark ? 'dark' : 'light');
      });
      var originalQuestions = [{"term":"1. de≈à v t√Ω≈ædni je","correct":"pondelok","answers":["utorok","streda"]},{"term":"2. de≈à v t√Ω≈ædni je","correct":"utorok","answers":["pondelok","streda"]},{"term":"3. de≈à v t√Ω≈ædni je","correct":"streda","answers":["piatok","sobota"]},{"term":"4. de≈à v t√Ω≈ædni je","correct":"≈°tvrtok","answers":["piatok","streda"]},{"term":"5. de≈à v t√Ω≈ædni je","correct":"piatok","answers":["pondelok","sobota"]},{"term":"6. de≈à v t√Ω≈ædni je","correct":"sobota","answers":["nedeƒæa","pondelok"]},{"term":"7. de≈à v t√Ω≈ædni je","correct":"nedeƒæa","answers":["pondelok","sobota"]}];
      var questionCount = 10;
      function shuffle(a){ for (var i=a.length-1;i>0;i--){var j=Math.floor(Math.random()*(i+1)); var t=a[i]; a[i]=a[j]; a[j]=t;} return a; }
      function pick(a,n){ return shuffle(a.slice()).slice(0,n); }
      // window.qs bude obsahova≈• presn√Ω poriadok a spr√°vne odpovede pre zobrazen√Ω test
      window.qs = [];
      function renderTest() {
        var form = document.getElementById('quizForm'); form.innerHTML = '';
        window.qs = pick(originalQuestions, Math.min(questionCount, originalQuestions.length))
                  .map(function(q){ return { term: q.term, correct: q.correct, opts: shuffle([q.correct].concat(q.answers)) }; });
        var nameField = document.createElement('input');
        nameField.type = 'text'; nameField.id = 'studentName'; nameField.placeholder = 'Zadajte meno ≈æiaka'; nameField.style.width='350px';
        form.appendChild(nameField);
        window.qs.forEach(function(q,i){
          var block = document.createElement('div'); block.className = 'question-block';
          var title = document.createElement('div'); title.className = 'question-title';
          title.textContent = (i+1) + '. ' + q.term;
          block.appendChild(title);
          var ansContainer = document.createElement('div'); ansContainer.className = 'answers';
          q.opts.forEach(function(opt){
            var lbl = document.createElement('label');
            var rd = document.createElement('input'); rd.type = 'radio'; rd.name = 'q' + i; rd.value = opt;
            lbl.appendChild(rd);
            lbl.appendChild(document.createTextNode(' ' + opt));
            ansContainer.appendChild(lbl);
          });
          block.appendChild(ansContainer);
          form.appendChild(block);
        });
        var submitBtn = document.createElement('button');
        submitBtn.type = 'button'; submitBtn.textContent = 'Odosla≈• odpovede';
        submitBtn.onclick = evaluateTest;
        form.appendChild(submitBtn);
        var resultsDiv = document.createElement('div'); resultsDiv.id = 'results'; form.appendChild(resultsDiv);
      }
      function evaluateTest() {
        var score = 0;
        var blocks = document.getElementsByClassName('question-block');
        Array.from(blocks).forEach(function(block, i){
          var elems = document.getElementsByName('q' + i);
          var selected = Array.from(elems).find(function(r){ return r.checked; });
          Array.from(elems).forEach(function(r){
            var lbl = r.parentNode;
            if (r.value === window.qs[i].correct) lbl.classList.add('correct');
            else if (r.checked) lbl.classList.add('incorrect');
          });
          var feedback = '';
          if (!selected) {
            block.classList.add('missing'); feedback = '‚ö†Ô∏è ch√Ωbaj√∫ca odpoveƒè';
          } else if (selected.value === window.qs[i].correct) {
            score++; feedback = '‚úÖ spr√°vna odpoveƒè';
          } else {
            feedback = '‚ùå nespr√°vna odpoveƒè';
          }
          var fbEl = document.createElement('div'); fbEl.style.fontWeight = 'bold'; fbEl.style.marginTop = '5px'; fbEl.textContent = feedback;
          block.appendChild(fbEl);
        });
        var percent = Math.round(score / (window.qs.length || 1) * 100);
        var name = document.getElementById('studentName').value || 'Nezn√°me meno';
        var now = new Date().toLocaleString();
        var out = document.getElementById('results');
        out.innerHTML = `<h3>üìä V√Ωsledky testu</h3>
          <p><strong>Meno ≈æiaka:</strong> ${name}</p>
          <p><strong>Body:</strong> ${score} / ${window.qs.length}</p>
          <p><strong>Percent√°:</strong> ${percent}%</p>
          <p><strong>D√°tum a ƒças:</strong> ${now}</p>`;
        var again = document.createElement('button');
        again.type = 'button'; again.textContent = 'üîÅ Znova'; again.onclick = renderTest;
        out.appendChild(again);
      }
      renderTest();
    });
  </script>
  <br><br><b>Spracovala pomocou UI:</b> Mgr. Erika Matyiov√° (2025)<br><br>
</body>
</html>
